<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Monthly Sales Tax Calc</title>

<body>
  <h1>Monthly Sales Tax Calc</h1>

  <label>Gross Sales ($)
    <input type="number" id="grossSales" step="0.01">
  </label>

  <h3>Single items over $1,600</h3>
  <div id="highItems"></div>
  <button id="addItem" type="button">Add Item</button>
  <button id="calc" type="button">Calculate</button>

  <hr>

  <h2>Summary</h2>
  <div style="border:1px solid #ccc;padding:8px;max-width:480px;">
    <p>Gross Sales: <strong id="outGross">0</strong></p>
    <p>State Tax (7%): <strong id="outState">0</strong></p>
    <p>Local Tax (2.25%): <strong id="outLocal">0</strong></p>
    <p>Addon local / single-article (2.75%): <strong id="outExtra">0</strong></p>
    <p><b>Total Tax:</b> <strong id="outTotal">0</strong></p>
  </div>

  <h2>Schedule B – Local Sales and Use Tax</h2>
  <div style="border:1px solid #ccc;padding:8px;max-width:650px;font-family:monospace;">
    <p>Taxable total (state base):      <span id="sb_taxable">0</span></p>
    <p>Less excess over $1,600 items:   <span id="sb_excess">0</span></p>
    <p>New taxable total (local base):  <span id="sb_new">0</span></p>
    <p>Local sales and use tax @ 2.25%: <span id="sb_local">0</span></p>
  </div>

  <h2>Schedule C – Single Article / Special</h2>
  <div style="border:1px solid #ccc;padding:8px;max-width:650px;font-family:monospace;">
    <p>Taxable portion $1,600.01–$3,200: <span id="sc_base">0</span></p>
    <p>State tax @ 2.75%:                <span id="sc_tax">0</span></p>
  </div>

  <script>
    const highContainer = document.getElementById('highItems')

    function addHighItem(value = '') {
      const input = document.createElement('input')
      input.type = 'number'
      input.step = '0.01'
      input.placeholder = 'Item amount'
      input.className = 'hi'
      if (value) input.value = value
      highContainer.appendChild(input)
      highContainer.appendChild(document.createElement('br'))
    }

    document.getElementById('addItem').onclick = () => addHighItem()

    document.getElementById('calc').onclick = () => {
      const gross = parseFloat(document.getElementById('grossSales').value) || 0
      const stateTax = Math.round(gross * 0.07)

      let totalExcessForLocal = 0
      let totalExtraPortion = 0
      const hi = highContainer.querySelectorAll('input.hi')
      hi.forEach(i => {
        const v = parseFloat(i.value)
        if (!isNaN(v) && v > 1600) {
          totalExcessForLocal += v - 1600
          const extraRange = Math.min(v, 3200) - 1600
          if (extraRange > 0) totalExtraPortion += extraRange
        }
      })

      const localBase = Math.max(0, gross - totalExcessForLocal)
      const localTax = Math.round(localBase * 0.0225)
      const extraTax = Math.round(totalExtraPortion * 0.0275)
      const totalTax = stateTax + localTax + extraTax

      // Summary
      document.getElementById('outGross').textContent = gross
      document.getElementById('outState').textContent = stateTax
      document.getElementById('outLocal').textContent = localTax
      document.getElementById('outExtra').textContent = extraTax
      document.getElementById('outTotal').textContent = totalTax

      // Schedule B
      document.getElementById('sb_taxable').textContent = gross
      document.getElementById('sb_excess').textContent = totalExcessForLocal
      document.getElementById('sb_new').textContent = localBase
      document.getElementById('sb_local').textContent = localTax

      // Schedule C
      document.getElementById('sc_base').textContent = totalExtraPortion
      document.getElementById('sc_tax').textContent = extraTax
    }
  </script>
</body>
</html>
